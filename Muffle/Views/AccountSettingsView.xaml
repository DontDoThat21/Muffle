<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:Muffle.ViewModels"
             x:Class="Muffle.Views.AccountSettingsView"
             x:DataType="viewmodels:AccountSettingsViewModel"
             BackgroundColor="#303030">
    
    <Grid RowDefinitions="Auto,Auto,*" Padding="20" RowSpacing="20">
        
        <!-- Header -->
        <VerticalStackLayout Grid.Row="0" Spacing="10">
            <Label Text="Account Settings" 
                   FontSize="24" 
                   FontAttributes="Bold" 
                   TextColor="White"/>
            <Label Text="Manage your account settings and preferences" 
                   FontSize="14" 
                   TextColor="LightGray"/>
        </VerticalStackLayout>

        <!-- User Info -->
        <Frame Grid.Row="1" 
               Padding="20" 
               BorderColor="#424242"
               BackgroundColor="#252525"
               CornerRadius="8"
               HasShadow="False">
            <VerticalStackLayout Spacing="10">
                <Label Text="Current Account" 
                       FontSize="18" 
                       FontAttributes="Bold"
                       TextColor="White"/>
                <Label Text="{Binding CurrentUserFullUsername}" 
                       FontSize="16" 
                       TextColor="LightGray"/>
                <Label Text="{Binding CurrentUserEmail}" 
                       FontSize="14" 
                       TextColor="Gray"/>
            </VerticalStackLayout>
        </Frame>

        <!-- Settings Options -->
        <ScrollView Grid.Row="2">
            <VerticalStackLayout Spacing="20">

                <!-- Status Message -->
                <Label Text="{Binding StatusMessage}" 
                       IsVisible="{Binding HasStatusMessage}"
                       HorizontalOptions="Center"
                       TextColor="Orange"
                       FontSize="14"
                       FontAttributes="Bold"/>

                <!-- Processing Indicator -->
                <ActivityIndicator IsVisible="{Binding IsProcessing}" 
                                 IsRunning="{Binding IsProcessing}"
                                 Color="White"
                                 HorizontalOptions="Center"/>

                <!-- Danger Zone -->
                <Frame Padding="20" 
                       BorderColor="#F04747"
                       BackgroundColor="#2C1E1E"
                       CornerRadius="8"
                       HasShadow="False">
                    <VerticalStackLayout Spacing="15">
                        <Label Text="Danger Zone" 
                               FontSize="18" 
                               FontAttributes="Bold"
                               TextColor="#F04747"/>
                        
                        <Label Text="These actions cannot be easily undone. Proceed with caution." 
                               FontSize="12" 
                               TextColor="LightGray"
                               Margin="0,0,0,10"/>

                        <!-- Disable Account -->
                        <Frame Padding="15" 
                               BorderColor="#424242"
                               BackgroundColor="#1E1E1E"
                               CornerRadius="4"
                               HasShadow="False">
                            <VerticalStackLayout Spacing="10">
                                <Label Text="Disable Account" 
                                       FontSize="16" 
                                       FontAttributes="Bold"
                                       TextColor="White"/>
                                <Label Text="Temporarily disable your account. You can re-enable it later by contacting support." 
                                       FontSize="12" 
                                       TextColor="Gray"
                                       LineBreakMode="WordWrap"/>
                                <Button Text="Disable My Account" 
                                        Command="{Binding DisableAccountCommand}"
                                        BackgroundColor="#F04747"
                                        TextColor="White"
                                        CornerRadius="4"
                                        Padding="0,12"
                                        IsEnabled="{Binding IsProcessing, Converter={StaticResource InverseBoolConverter}}"
                                        Margin="0,10,0,0"/>
                            </VerticalStackLayout>
                        </Frame>

                        <!-- Delete Account -->
                        <Frame Padding="15" 
                               BorderColor="#424242"
                               BackgroundColor="#1E1E1E"
                               CornerRadius="4"
                               HasShadow="False"
                               Margin="0,10,0,0">
                            <VerticalStackLayout Spacing="10">
                                <Label Text="Delete Account Permanently" 
                                       FontSize="16" 
                                       FontAttributes="Bold"
                                       TextColor="#F04747"/>
                                <Label Text="Permanently delete your account and all associated data. This action CANNOT be undone!" 
                                       FontSize="12" 
                                       TextColor="Gray"
                                       LineBreakMode="WordWrap"/>
                                <Button Text="Permanently Delete Account" 
                                        Command="{Binding DeleteAccountCommand}"
                                        BackgroundColor="#990000"
                                        TextColor="White"
                                        CornerRadius="4"
                                        Padding="0,12"
                                        IsEnabled="{Binding IsProcessing, Converter={StaticResource InverseBoolConverter}}"
                                        Margin="0,10,0,0"/>
                            </VerticalStackLayout>
                        </Frame>

                    </VerticalStackLayout>
                </Frame>

            </VerticalStackLayout>
        </ScrollView>
        
    </Grid>
</ContentView>
